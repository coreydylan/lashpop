@import url('https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700;900&family=Hanken+Grotesk:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=Outfit:wght@200;300;400;500&family=Libre+Baskerville:ital@0;1&family=TikTok+Sans:wght@400;500;600;700&display=swap');

@font-face {
    font-family: 'Corey Nice';
    src: url('/fonts/corey-nice/CoreyNice-Regular.woff2') format('woff2'),
        url('/fonts/corey-nice/CoreyNice-Regular.woff') format('woff');
    font-weight: 400;
    font-style: normal;
    font-display: block;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    /* Typography - Two-font system
       Uses Next.js font variables (--font-playfair, --font-inter) with CSS fallbacks */
    --font-display: var(--font-playfair, 'Playfair Display'), serif;      /* Headlines, titles, names, hero text */
    --font-body: var(--font-inter, 'Inter'), system-ui, sans-serif;  /* Paragraphs, buttons, nav, forms */
    --font-sans: var(--font-inter, 'Inter'), system-ui, sans-serif;
    --font-serif: var(--font-playfair, 'Playfair Display'), serif;

    /* LashPop Brand Palette (light to dark) */
    /* Using space-separated RGB values for modern CSS color syntax with alpha support */
    --ivory: 250 246 242;          /* #faf6f2 - Main background color */
    --cream: 240 224 219;          /* #f0e0db - Background (testing blush-light) */
    --blush-light: 240 224 219;    /* #f0e0db - Subtle highlights */
    --peach: 238 217 200;          /* #eed9c8 - Soft accents */
    --blush: 233 209 200;          /* #e9d1c8 - Light accent */
    --rose-mist: 226 194 182;      /* #e2c2b6 - Medium accent */
    --dusty-rose: 219 178 164;     /* #dbb2a4 - Primary accent */
    --terracotta-light: 196 107 78; /* #c46b4e - Lighter terracotta */
    --terracotta: 181 86 61;       /* #b5563d - Primary brand color (matches logo) */
    --rust: 172 77 60;             /* #ac4d3c - Deep accent / CTA */

    /* Legacy colors */
    --sage: 161 151 129;
    --warm-sand: 235 224 203;
    --golden: 177 78 51;            /* #b14e33 - Dark terracotta */
    --gold: 177 78 51;               /* #b14e33 - Dark terracotta for stars & accents */
    --ocean-mist: 188 201 194;
    --dune: 138 124 105;

    /* Spacing */
    --space-xs: clamp(0.75rem, 2vw, 1rem);
    --space-sm: clamp(1.5rem, 4vw, 2rem);
    --space-md: clamp(2.5rem, 6vw, 4rem);
    --space-lg: clamp(4rem, 8vw, 6rem);
    --space-xl: clamp(6rem, 10vw, 8rem);

    /* Border Radius */
    --radius-soft: 24px;
    --radius-arch: 50% 50% 0 0;

    /* iOS Safe Area Insets (fallback to 0 for non-iOS) */
    --safe-area-inset-top: env(safe-area-inset-top, 0px);
    --safe-area-inset-right: env(safe-area-inset-right, 0px);
    --safe-area-inset-bottom: env(safe-area-inset-bottom, 0px);
    --safe-area-inset-left: env(safe-area-inset-left, 0px);

    /* Mobile Header Height - single source of truth */
    --mobile-header-height: 52px;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  
  html {
    scroll-behavior: smooth;
    font-size: 16px;
    overflow-x: clip;
    width: 100%;
    max-width: 100vw;
  }

  body {
    font-family: var(--font-body);
    font-weight: 400;
    color: rgb(var(--dune));
    background: rgb(var(--ivory));
    line-height: 1.6;
    min-height: 100vh;
    overflow-x: clip;
    width: 100%;
    max-width: 100vw;
    position: relative;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    /* Prevent tap highlight on iOS */
    -webkit-tap-highlight-color: transparent;
    /* Enable smooth momentum scrolling on iOS */
    -webkit-overflow-scrolling: touch;
  }

  /*
   * MOBILE HERO TRANSPARENCY
   * On mobile, we need a layered approach:
   * - html: ivory background (fallback for areas below MobileHeroBackground)
   * - body: transparent so fixed MobileHeroBackground (z-0) shows through
   * - scroll container: transparent to see through to MobileHeroBackground
   */
  @media (max-width: 767px) {
    html {
      background: #faf6f2 !important;
    }

    body {
      background: transparent !important;
    }

    .mobile-content-wrapper {
      background: transparent !important;
    }

    .mobile-scroll-container {
      background: transparent !important;
    }
  }
  
  ::selection {
    background: rgb(var(--dusty-rose) / 0.2);
    color: rgb(var(--dune));
  }

  /* Custom scrollbar */
  ::-webkit-scrollbar {
    width: 6px;
  }

  ::-webkit-scrollbar-track {
    background: rgb(var(--cream));
  }

  ::-webkit-scrollbar-thumb {
    background: rgb(var(--sage) / 0.5);
    border-radius: 100px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgb(var(--sage) / 0.7);
  }
}

.scrollbar-hidden {
  -ms-overflow-style: none;
  scrollbar-width: none;
  -webkit-overflow-scrolling: touch;
}

.scrollbar-hidden.overflow-x-auto {
  touch-action: pan-x;
}

.scrollbar-hidden.overflow-y-auto {
  touch-action: pan-y;
}

.scrollbar-hidden::-webkit-scrollbar {
  display: none;
}

/* Utility class for hiding scrollbars while maintaining scroll functionality */
.scrollbar-hide {
  -ms-overflow-style: none;  /* IE and Edge */
  scrollbar-width: none;  /* Firefox */
  -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
}

.scrollbar-hide::-webkit-scrollbar {
  display: none;  /* Chrome, Safari and Opera */
}

  /* Prevent iOS image context menu in DAM */
  .dam-grid img,
  .photo-lightbox-thumb img,
  .photo-lightbox-overlay img {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
    pointer-events: none;
    /* Ensure images respect container sizing */
    max-width: 100%;
    height: auto;
  }

  /* Override for static cropped images that need to fill container */
  img.object-cover {
    height: 100% !important;
    max-width: none !important;
  }

/* Ensure touch manipulation on containers */
.dam-grid > div,
.photo-lightbox-thumb {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

/* Photo lightbox OmniBar - ensure it matches grid view exactly */
.photo-lightbox-omnibar {
  /* Position at top of lightbox, not overlaying the image */
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  z-index: 50;
  pointer-events: auto;
}

/* iOS Safe Area Support */
.safe-top {
  padding-top: var(--safe-area-inset-top);
}

.safe-bottom {
  padding-bottom: var(--safe-area-inset-bottom);
}

.safe-left {
  padding-left: var(--safe-area-inset-left);
}

.safe-right {
  padding-right: var(--safe-area-inset-right);
}

.safe-x {
  padding-left: var(--safe-area-inset-left);
  padding-right: var(--safe-area-inset-right);
}

.safe-y {
  padding-top: var(--safe-area-inset-top);
  padding-bottom: var(--safe-area-inset-bottom);
}

.safe-all {
  padding-top: var(--safe-area-inset-top);
  padding-right: var(--safe-area-inset-right);
  padding-bottom: var(--safe-area-inset-bottom);
  padding-left: var(--safe-area-inset-left);
}

/* iOS Touch Optimization */
button,
a,
[role="button"],
[role="link"],
.btn,
.clickable {
  /* Prevent 300ms tap delay on iOS */
  touch-action: manipulation;
  /* Remove iOS tap highlight */
  -webkit-tap-highlight-color: transparent;
  /* Minimum touch target size (44x44pt per iOS HIG) */
  min-height: 44px;
  min-width: 44px;
}

/* Allow specific touch actions on scrollable containers */
.scroll-container-x {
  touch-action: pan-x;
  -webkit-overflow-scrolling: touch;
}

.scroll-container-y {
  touch-action: pan-y;
  -webkit-overflow-scrolling: touch;
}

/* Horizontal scrollable tag container */
.horizontal-scroll-tags {
  display: flex;
  flex-wrap: nowrap;
  gap: 0.375rem;
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scrollbar-width: none;
  -ms-overflow-style: none;
  touch-action: pan-x;
}

.horizontal-scroll-tags::-webkit-scrollbar {
  display: none;
}

.horizontal-scroll-tags > * {
  flex-shrink: 0;
  white-space: nowrap;
}

/* Fade gradient for horizontal scroll indication */
.horizontal-scroll-fade {
  position: relative;
}

.horizontal-scroll-fade::after {
  content: '';
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  width: 24px;
  background: linear-gradient(to right, transparent, currentColor);
  pointer-events: none;
  opacity: 0.15;
}

@layer components {
  /* ===========================================
     TYPOGRAPHY SYSTEM
     -------------------------------------------
     Playfair Display (--font-display): Headlines, titles, names, hero text
     Inter (--font-body): Paragraphs, descriptions, buttons, forms, nav
     =========================================== */

  /* DISPLAY TEXT - Playfair Display */
  .h1 {
    font-family: var(--font-display);
    font-size: clamp(2rem, 5vw, 3.5rem);
    font-weight: 500;
    line-height: 1.2;
    letter-spacing: -0.01em;
  }

  .h2 {
    font-family: var(--font-display);
    font-size: clamp(1.5rem, 4vw, 2.5rem);
    font-weight: 500;
    line-height: 1.3;
    letter-spacing: -0.01em;
  }

  .h3 {
    font-family: var(--font-display);
    font-size: clamp(1.25rem, 3vw, 1.75rem);
    font-weight: 500;
    line-height: 1.4;
    letter-spacing: 0;
  }

  .heading-4 {
    font-family: var(--font-display);
    font-size: clamp(1rem, 2vw, 1.25rem);
    font-weight: 500;
    line-height: 1.4;
    letter-spacing: 0;
  }

  /* Stylist/Person names - Playfair Display */
  .text-name {
    font-family: var(--font-display);
    font-weight: 500;
  }

  /* BODY TEXT - Inter */
  .body-lg {
    font-family: var(--font-body);
    font-size: clamp(1.1rem, 2vw, 1.25rem);
    font-weight: 400;
    line-height: 1.7;
    letter-spacing: 0;
  }

  .body {
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.7;
  }

  .body-text {
    font-family: var(--font-body);
    font-size: 1rem;
    font-weight: 400;
    line-height: 1.7;
  }

  /* UI TEXT - Inter (captions, labels, buttons) */
  .caption {
    font-family: var(--font-body);
    font-size: 0.875rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    text-transform: uppercase;
  }

  .caption-bold {
    font-family: var(--font-body);
    font-size: 0.875rem;
    font-weight: 600;
    letter-spacing: 0.02em;
    text-transform: uppercase;
  }

  .button-primary {
    font-family: var(--font-body);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.75rem 1.5rem;
    border-radius: 100px;
    font-size: 0.875rem;
    font-weight: 500;
    letter-spacing: 0.02em;
    text-transform: uppercase;
    background: rgb(var(--rust));
    color: rgb(var(--cream));
    border: none;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .button-primary:hover {
    background: rgb(var(--terracotta));
    transform: translateY(-2px);
  }

  .button-primary:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    transform: none;
  }

  /* Layout */
  .container-wide {
    width: 100%;
    max-width: 1400px;
    margin: 0 auto;
    padding: 0 var(--space-sm);
  }
  
  .container {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 var(--space-sm);
  }
  
  .container-narrow {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    padding: 0 var(--space-sm);
  }

  /* Arch Shapes */
  .arch-top {
    border-radius: var(--radius-soft) var(--radius-soft) 0 0;
  }
  
  .arch-bottom {
    border-radius: 0 0 var(--radius-soft) var(--radius-soft);
  }
  
  .arch-full {
    border-radius: var(--radius-soft);
  }
  
  /* Glass Effects */
  .glass {
    background: rgb(var(--ivory) / 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
  }
  
  /* Buttons */
  .btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    padding: 0.875rem 2rem;
    border-radius: 100px;
    font-size: 0.9rem;
    font-weight: 400;
    letter-spacing: 0.05em;
    text-transform: uppercase;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    cursor: pointer;
    border: none;
    outline: none;
  }
  
  .btn-primary {
    background: rgb(var(--rust));
    color: rgb(var(--cream));
  }

  .btn-primary:hover {
    background: rgb(var(--terracotta));
    transform: translateY(-2px);
  }
  
  .btn-secondary {
    background: transparent;
    color: rgb(var(--dune));
    border: 1px solid rgb(var(--sage) / 0.3);
  }

  .btn-secondary:hover {
    background: rgb(var(--sage) / 0.1);
    border-color: rgb(var(--sage) / 0.5);
  }
  
  /* Utility Classes */
  .text-sage {
    color: rgb(var(--sage));
  }
  
  .text-dusty-rose {
    color: rgb(var(--dusty-rose));
  }
  
  .text-golden {
    color: rgb(var(--golden));
  }
  
  .text-terracotta {
    color: rgb(var(--terracotta));
  }
  
  .bg-sage {
    background-color: rgb(var(--sage));
  }
  
  .bg-dusty-rose {
    background-color: rgb(var(--dusty-rose));
  }
  
  .bg-warm-sand {
    background-color: rgb(var(--warm-sand));
  }
  
  .bg-ocean-mist {
    background-color: rgb(var(--ocean-mist));
  }
  
  .bg-cream {
    background-color: rgb(var(--cream));
  }

  /* Hide scrollbar utility */
  .hide-scrollbar {
    -ms-overflow-style: none;  /* Internet Explorer 10+ */
    scrollbar-width: none;  /* Firefox */
  }

  .hide-scrollbar::-webkit-scrollbar {
    display: none;  /* Safari and Chrome */
  }

  /* Prevent text selection during drag */
  .dragging-selection {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }

  /* Disable pointer events on images during drag */
  .dragging-selection img {
    pointer-events: none;
  }

  /* Hide scrollbar while maintaining scroll functionality */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* Prevent horizontal scroll on mobile - strict containment */
  /* Note: overflow-x: hidden breaks position: sticky, so we use clip instead */
  .no-horizontal-scroll {
    overflow-x: clip;
    max-width: 100vw;
    width: 100%;
  }

  .no-horizontal-scroll * {
    max-width: 100%;
  }

  /* Filter utilities for tag colorization */
  .brightness-110 {
    filter: brightness(1.15);
  }

  .saturate-130 {
    filter: saturate(1.4);
  }

  .brightness-110.saturate-130 {
    filter: brightness(1.15) saturate(1.4);
  }

  /* Mapbox Navigation Controls - smaller on mobile */
  .mapboxgl-ctrl-group {
    border-radius: 8px !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1) !important;
  }

  .mapboxgl-ctrl-group button {
    width: 32px !important;
    height: 32px !important;
  }

  .mapboxgl-ctrl-group button .mapboxgl-ctrl-icon {
    background-size: 16px 16px !important;
  }

  @media (min-width: 768px) {
    .mapboxgl-ctrl-group button {
      width: 36px !important;
      height: 36px !important;
    }

    .mapboxgl-ctrl-group button .mapboxgl-ctrl-icon {
      background-size: 18px 18px !important;
    }
  }

  /* V2 Theme Overrides - Two-font system
     Playfair Display: Headlines, titles, names, hero text
     Inter: Paragraphs, descriptions, buttons, forms, nav */
  .theme-v2 {
    --font-display: var(--font-playfair, 'Playfair Display'), serif;
    --font-body: var(--font-inter, 'Inter'), system-ui, sans-serif;
    --font-serif: var(--font-playfair, 'Playfair Display'), serif;
    --font-sans: var(--font-inter, 'Inter'), system-ui, sans-serif;
    font-family: var(--font-body);
  }

  /* Display text - Playfair Display */
  .theme-v2 .h1,
  .theme-v2 .h2,
  .theme-v2 .h3,
  .theme-v2 .heading-4,
  .theme-v2 .text-name {
    font-family: var(--font-display);
  }

  /* Body/UI text - Inter */
  .theme-v2 p,
  .theme-v2 .body,
  .theme-v2 .body-lg,
  .theme-v2 .body-text {
    font-family: var(--font-body);
  }

  .theme-v2 .caption,
  .theme-v2 .caption-bold,
  .theme-v2 .btn,
  .theme-v2 button {
    font-family: var(--font-body);
  }

  /* Allow overrides inside theme v2 sections */
  .theme-v2 .font-swanky,
  .theme-v2 .font-swanky *,
  .font-swanky {
    font-family: var(--font-swanky), cursive !important;
  }
}
